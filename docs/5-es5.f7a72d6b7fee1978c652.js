function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var c=e[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lE2P:function(t,e,r){"use strict";r.r(e),r.d(e,"ProductModule",(function(){return rt}));var c,n=r("tyNb"),o=r("PCNd"),i=r("fXoL"),s=r("kt0X"),a=Object(s.n)("[Product] Toggle product code"),d=Object(s.n)("[Product] Set Current product",Object(s.s)()),u=Object(s.n)("[Product] Clear Current product"),l=Object(s.n)("[Product] Initialize Current product"),b=Object(s.n)("[Product] Load"),p=Object(s.n)("[Product] Load Success",Object(s.s)()),f=Object(s.n)("[Product] Load Fail",Object(s.s)()),g=Object(s.o)("products"),h=Object(s.q)(g,(function(t){return t.showProductsCode})),m=Object(s.q)(g,(function(t){return t.currentProduct})),v=Object(s.q)(g,(function(t){return t.products})),C=Object(s.q)(g,(function(t){return t.error})),y=Object(s.p)({showProductsCode:!1,currentProduct:null,products:[],error:null},Object(s.r)(a,(function(t){return Object.assign(Object.assign({},t),{showProductsCode:!t.showProductsCode})})),Object(s.r)(d,(function(t,e){return Object.assign(Object.assign({},t),{currentProduct:e.product})})),Object(s.r)(u,(function(t){return Object.assign(Object.assign({},t),{currentProduct:null})})),Object(s.r)(l,(function(t){return Object.assign(Object.assign({},t),{currentProduct:{id:0,productName:"",productCode:"New",description:"",starRating:0}})})),Object(s.r)(p,(function(t,e){return Object.assign(Object.assign({},t),{products:e.products,error:null})})),Object(s.r)(f,(function(t,e){return Object.assign(Object.assign({},t),{products:[],error:e.error})}))),O=r("tk/3"),R=r("z6cu"),j=r("JIr8"),P=r("vkgz"),k=r("lJxs"),Q=((c=function(){function t(e){_classCallCheck(this,t),this.http=e,this.productsUrl="api/products"}return _createClass(t,[{key:"getProducts",value:function(){return this.http.get(this.productsUrl).pipe(Object(j.a)(this.handleError))}},{key:"createProduct",value:function(t){var e=new O.d({"Content-Type":"application/json"}),r=Object.assign(Object.assign({},t),{id:null});return this.http.post(this.productsUrl,r,{headers:e}).pipe(Object(P.a)((function(t){return console.log("createProduct: "+JSON.stringify(t))})),Object(j.a)(this.handleError))}},{key:"deleteProduct",value:function(t){var e=new O.d({"Content-Type":"application/json"});return this.http.delete("".concat(this.productsUrl,"/").concat(t),{headers:e}).pipe(Object(P.a)((function(e){return console.log("deleteProduct: "+t)})),Object(j.a)(this.handleError))}},{key:"updateProduct",value:function(t){var e=new O.d({"Content-Type":"application/json"});return this.http.put("".concat(this.productsUrl,"/").concat(t.id),t,{headers:e}).pipe(Object(P.a)((function(){return console.log("updateProduct: "+t.id)})),Object(k.a)((function(){return t})),Object(j.a)(this.handleError))}},{key:"handleError",value:function(t){var e;return e=t.error instanceof ErrorEvent?"An error occurred: "+t.error.message:"Backend returned code ".concat(t.status,": ").concat(t.body.error),console.error(t),Object(R.a)(e)}}]),t}()).\u0275fac=function(t){return new(t||c)(i.Vb(O.b))},c.\u0275prov=i.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),M=r("ofXK");function _(t,e){if(1&t&&(i.Pb(0),i.mc(1),i.Ob()),2&t){var r=i.bc().$implicit;i.Cb(1),i.oc(" (",r.productCode,") ")}}var w=function(t){return{active:t}};function I(t,e){if(1&t){var r=i.Sb();i.Rb(0,"button",13),i.Zb("click",(function(){i.ic(r);var t=e.$implicit;return i.bc(2).productSelected(t)})),i.cc(1,"async"),i.mc(2),i.lc(3,_,2,1,"ng-container",14),i.cc(4,"async"),i.Qb()}if(2&t){var c,n=e.$implicit,o=i.bc(2),s=i.fc(7,w,(null==n?null:n.id)===(null==(c=i.dc(1,3,o.selectedProduct$))?null:c.id));i.ec("ngClass",s),i.Cb(2),i.oc(" ",n.productName," "),i.Cb(1),i.ec("ngIf",i.dc(4,5,o.displayCode$))}}function N(t,e){if(1&t&&(i.Rb(0,"div",10),i.Rb(1,"div",11),i.lc(2,I,5,9,"button",12),i.Qb(),i.Qb()),2&t){var r=e.ngIf;i.Cb(2),i.ec("ngForOf",r)}}function x(t,e){if(1&t&&(i.Rb(0,"div",15),i.mc(1),i.Qb()),2&t){var r=e.ngIf;i.Cb(1),i.oc(" Error: ",r,"\n")}}var F,S=((F=function(){function t(e,r){_classCallCheck(this,t),this.productService=e,this._store=r,this.pageTitle="Products",this.errorMessage$=this._store.select(C),this.displayCode$=this._store.select(h),this.products$=this._store.select(v),this.selectedProduct$=this._store.select(m)}return _createClass(t,[{key:"ngOnInit",value:function(){this._store.dispatch(b())}},{key:"checkChanged",value:function(){this._store.dispatch(a())}},{key:"newProduct",value:function(){this._store.dispatch(l())}},{key:"productSelected",value:function(t){this._store.dispatch(d({product:t}))}}]),t}()).\u0275fac=function(t){return new(t||F)(i.Mb(Q),i.Mb(s.h))},F.\u0275cmp=i.Gb({type:F,selectors:[["pm-product-list"]],decls:17,vars:10,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],[1,"card-footer"],[1,"row"],[1,"form-check","col-md-7"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"col-md-4","text-right"],[1,"btn","btn-primary",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"list-group"],["class","list-group-item list-group-item-action rounded-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","rounded-0",3,"ngClass","click"],[4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(i.Rb(0,"div",0),i.Rb(1,"div",1),i.mc(2),i.Qb(),i.lc(3,N,3,1,"div",2),i.cc(4,"async"),i.Rb(5,"div",3),i.Rb(6,"div",4),i.Rb(7,"div",5),i.Rb(8,"label"),i.Rb(9,"input",6),i.Zb("change",(function(){return e.checkChanged()})),i.cc(10,"async"),i.Qb(),i.mc(11," Display Product Code "),i.Qb(),i.Qb(),i.Rb(12,"div",7),i.Rb(13,"button",8),i.Zb("click",(function(){return e.newProduct()})),i.mc(14,"Add"),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.lc(15,x,2,1,"div",9),i.cc(16,"async")),2&t&&(i.Cb(2),i.oc(" ",e.pageTitle," "),i.Cb(1),i.ec("ngIf",i.dc(4,4,e.products$)),i.Cb(6),i.ec("checked",i.dc(10,6,e.displayCode$)),i.Cb(6),i.ec("ngIf",i.dc(16,8,e.errorMessage$)))},directives:[M.k,M.j,M.i],pipes:[M.b],styles:[".card-body[_ngcontent-%COMP%]{padding:0}"]}),F),$=r("3Pt+"),E=function(){function t(e){_classCallCheck(this,t),this.validationMessages=e}return _createClass(t,[{key:"processMessages",value:function(t){var e=this,r={},c=function(c){if(t.controls.hasOwnProperty(c)){var n=t.controls[c];if(n instanceof $.d){var o=e.processMessages(n);Object.assign(r,o)}else e.validationMessages[c]&&(r[c]="",(n.dirty||n.touched)&&n.errors&&Object.keys(n.errors).map((function(t){e.validationMessages[c][t]&&(r[c]+=e.validationMessages[c][t]+" ")})))}};for(var n in t.controls)c(n);return r}}]),t}(),q=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"range",value:function(t,e){return function(r){return r.value&&(isNaN(r.value)||r.value<t||r.value>e)?{range:!0}:null}}}]),t}();function T(t,e){if(1&t&&(i.Rb(0,"span",22),i.mc(1),i.Qb()),2&t){var r=i.bc(2);i.Cb(1),i.oc(" ",r.displayMessage.productName," ")}}function Z(t,e){if(1&t&&(i.Rb(0,"span",22),i.mc(1),i.Qb()),2&t){var r=i.bc(2);i.Cb(1),i.oc(" ",r.displayMessage.productCode," ")}}function L(t,e){if(1&t&&(i.Rb(0,"span",22),i.mc(1),i.Qb()),2&t){var r=i.bc(2);i.Cb(1),i.oc(" ",r.displayMessage.starRating," ")}}function V(t,e){if(1&t&&(i.Rb(0,"span",22),i.mc(1),i.Qb()),2&t){var r=i.bc(2);i.Cb(1),i.oc(" ",r.displayMessage.description," ")}}var J=function(t){return{"is-invalid":t}};function G(t,e){if(1&t){var r=i.Sb();i.Rb(0,"div",2),i.Rb(1,"div",3),i.mc(2),i.Qb(),i.Rb(3,"div",4),i.Rb(4,"form",5),i.Zb("ngSubmit",(function(){i.ic(r);var t=e.ngIf;return i.bc().saveProduct(t)})),i.Rb(5,"fieldset"),i.Rb(6,"div",6),i.Rb(7,"label",7),i.mc(8,"Product Name"),i.Qb(),i.Rb(9,"div",8),i.Rb(10,"input",9),i.Zb("blur",(function(){return i.ic(r),i.bc().blur()})),i.Qb(),i.lc(11,T,2,1,"span",10),i.Qb(),i.Qb(),i.Rb(12,"div",6),i.Rb(13,"label",11),i.mc(14,"Product Code"),i.Qb(),i.Rb(15,"div",8),i.Rb(16,"input",12),i.Zb("blur",(function(){return i.ic(r),i.bc().blur()})),i.Qb(),i.lc(17,Z,2,1,"span",10),i.Qb(),i.Qb(),i.Rb(18,"div",6),i.Rb(19,"label",13),i.mc(20,"Star Rating (1-5)"),i.Qb(),i.Rb(21,"div",8),i.Nb(22,"input",14),i.lc(23,L,2,1,"span",10),i.Qb(),i.Qb(),i.Rb(24,"div",6),i.Rb(25,"label",15),i.mc(26,"Description"),i.Qb(),i.Rb(27,"div",8),i.Rb(28,"textarea",16),i.mc(29,"            "),i.Qb(),i.lc(30,V,2,1,"span",10),i.Qb(),i.Qb(),i.Rb(31,"div",17),i.Rb(32,"div",18),i.Rb(33,"span"),i.Rb(34,"button",19),i.mc(35," Save "),i.Qb(),i.Qb(),i.Rb(36,"span"),i.Rb(37,"button",20),i.Zb("click",(function(){i.ic(r);var t=e.ngIf;return i.bc().cancelEdit(t)})),i.mc(38," Cancel "),i.Qb(),i.Qb(),i.Rb(39,"span"),i.Rb(40,"button",21),i.Zb("click",(function(){i.ic(r);var t=e.ngIf;return i.bc().deleteProduct(t)})),i.mc(41," Delete "),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb()}if(2&t){var c=i.bc();i.Cb(2),i.oc(" ",c.pageTitle," "),i.Cb(2),i.ec("formGroup",c.productForm),i.Cb(6),i.ec("ngClass",i.fc(11,J,c.displayMessage.productName)),i.Cb(1),i.ec("ngIf",c.displayMessage.productName),i.Cb(5),i.ec("ngClass",i.fc(13,J,c.displayMessage.productCode)),i.Cb(1),i.ec("ngIf",c.displayMessage.productCode),i.Cb(5),i.ec("ngClass",i.fc(15,J,c.displayMessage.starRating)),i.Cb(1),i.ec("ngIf",c.displayMessage.starRating),i.Cb(5),i.ec("ngClass",i.fc(17,J,c.displayMessage.description)),i.Cb(2),i.ec("ngIf",c.displayMessage.description),i.Cb(4),i.ec("disabled",!c.productForm.valid||!c.productForm.dirty)}}function U(t,e){if(1&t&&(i.Rb(0,"div",23),i.mc(1),i.Qb()),2&t){var r=i.bc();i.Cb(1),i.oc(" Error: ",r.errorMessage,"\n")}}var D,z,A,X,K=((z=function(){function t(e,r,c){var n=this;_classCallCheck(this,t),this.fb=e,this.productService=r,this._store=c,this.pageTitle="Product Edit",this.errorMessage="",this.product$=this._store.select(m).pipe(Object(P.a)((function(t){return n.displayProduct(t)}))),this.displayMessage={},this.validationMessages={productName:{required:"Product name is required.",minlength:"Product name must be at least three characters.",maxlength:"Product name cannot exceed 50 characters."},productCode:{required:"Product code is required."},starRating:{range:"Rate the product between 1 (lowest) and 5 (highest)."}},this.genericValidator=new E(this.validationMessages)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.productForm=this.fb.group({productName:["",[$.m.required,$.m.minLength(3),$.m.maxLength(50)]],productCode:["",$.m.required],starRating:["",q.range(1,5)],description:""}),this.productForm.valueChanges.subscribe((function(){return t.displayMessage=t.genericValidator.processMessages(t.productForm)})),this._store.select(m).subscribe({next:function(e){return t.displayProduct(e)}})}},{key:"blur",value:function(){this.displayMessage=this.genericValidator.processMessages(this.productForm)}},{key:"displayProduct",value:function(t){t&&(this.productForm.reset(),this.pageTitle=0===t.id?"Add Product":"Edit Product: "+t.productName,this.productForm.patchValue({productName:t.productName,productCode:t.productCode,starRating:t.starRating,description:t.description}))}},{key:"cancelEdit",value:function(t){this.displayProduct(t)}},{key:"deleteProduct",value:function(t){var e=this;t&&t.id?confirm("Really delete the product: ".concat(t.productName,"?"))&&this.productService.deleteProduct(t.id).subscribe({next:function(){return e._store.dispatch(u())},error:function(t){return e.errorMessage=t}}):this._store.dispatch(u())}},{key:"saveProduct",value:function(t){var e=this;if(this.productForm.valid&&this.productForm.dirty){var r=Object.assign(Object.assign({},t),this.productForm.value);0===r.id?this.productService.createProduct(r).subscribe({next:function(t){return e._store.dispatch(d({product:t}))},error:function(t){return e.errorMessage=t}}):this.productService.updateProduct(r).subscribe({next:function(t){return e._store.dispatch(d({product:t}))},error:function(t){return e.errorMessage=t}})}}}]),t}()).\u0275fac=function(t){return new(t||z)(i.Mb($.b),i.Mb(Q),i.Mb(s.h))},z.\u0275cmp=i.Gb({type:z,selectors:[["pm-product-edit"]],decls:3,vars:4,consts:[["class","card",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","productNameId",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","productNameId","type","text","placeholder","Name (required)","formControlName","productName",1,"form-control",3,"ngClass","blur"],["class","invalid-feedback",4,"ngIf"],["for","productCodeId",1,"col-md-3","col-form-label"],["id","productCodeId","type","text","placeholder","Code (required)","formControlName","productCode",1,"form-control",3,"ngClass","blur"],["for","starRatingId",1,"col-md-3","col-form-label"],["id","starRatingId","type","text","placeholder","Rating","formControlName","starRating",1,"form-control",3,"ngClass"],["for","descriptionId",1,"col-md-3","col-form-label"],["id","descriptionId","placeholder","Description","rows","3","formControlName","description",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"col-md-10","col-md-offset-2"],["type","submit",1,"btn","btn-primary",2,"width","80px","margin-right","10px",3,"disabled"],["type","button",1,"btn","btn-light",2,"width","80px","margin-right","10px",3,"click"],["type","button",1,"btn","btn-light",2,"width","80px",3,"click"],[1,"invalid-feedback"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(i.lc(0,G,42,19,"div",0),i.cc(1,"async"),i.lc(2,U,2,1,"div",1)),2&t&&(i.ec("ngIf",i.dc(1,2,e.product$)),i.Cb(2),i.ec("ngIf",e.errorMessage))},directives:[M.k,$.n,$.h,$.e,$.a,$.g,$.c,M.i],pipes:[M.b],encapsulation:2}),z),B=((D=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||D)},D.\u0275cmp=i.Gb({type:D,selectors:[["ng-component"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,e){1&t&&(i.Rb(0,"div",0),i.Rb(1,"div",1),i.Nb(2,"pm-product-list"),i.Qb(),i.Rb(3,"div",2),i.Nb(4,"pm-product-edit"),i.Qb(),i.Qb())},directives:[S,K],encapsulation:2}),D),H=r("snw9"),W=r("LRne"),Y=r("eIep"),tt=((A=function t(e,r){var c=this;_classCallCheck(this,t),this.actions$=e,this._productService=r,this.loadProducts$=Object(H.c)((function(){return c.actions$.pipe(Object(H.d)(b),Object(Y.a)((function(){return c._productService.getProducts().pipe(Object(k.a)((function(t){return p({products:t})})),Object(j.a)((function(t){return Object(W.a)(f({error:t}))})))})))}))}).\u0275fac=function(t){return new(t||A)(i.Vb(H.a),i.Vb(Q))},A.\u0275prov=i.Ib({token:A,factory:A.\u0275fac}),A),et=[{path:"",component:B}],rt=((X=function t(){_classCallCheck(this,t)}).\u0275mod=i.Kb({type:X}),X.\u0275inj=i.Jb({factory:function(t){return new(t||X)},imports:[[o.a,n.d.forChild(et),s.j.forFeature("products",y),H.b.forFeature([tt])]]}),X)}}]);